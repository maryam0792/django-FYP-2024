{% extends "tryonapp/base.html" %} {% load static %} {% block content %}
<div class="container">
  <h2 class="text-center font-weight-bold mb-4;">Virtual Try-On Sunglasses</h2>
            <div class="try-section">
  <div class="row mt-5 mb-5">
    <div class="col-12 col-md-6">
      <h2 class="text-center font-weight-bold">Upload Image</h2>
      
      <form
        method="post"
        action=" {% url 'upload_image' %}"
        enctype="multipart/form-data"
        class="mt-3"
      >
     
        {% csrf_token %} {{ form.as_p }}
        <input type="hidden" name="id" value="{{ product.id }}" id=""  accept=".jpg, .jpeg, .png" 
        required  />
        <button class="btn btn-primary btn-block" type="submit">Upload</button>
      </form>
      <hr />
      <div>
        <a href="/singleproducts/{{product.id}}" class="btn btn-secondary">Back</a>
          <a href="/shoppingcart/" class="btn btn-secondary">Next</a>
      </div>
      <input
        type="hidden"
        id="tryon1"
        value="{% get_media_prefix %}{{ product.tryon }}"
      />
      <div id="success-message" class="alert success">Glasses successfully applied!</div>
      <div id="error-message" class="alert error">Please choose another image with a visible face.</div>
    </div>
    
    <div class="col-12 col-md-6">
      {% if uploaded_file_url %}
      <h3>Virtual Try-On</h3>
      <div style="position: relative; display: inline-block">
        <img
          id="uploaded-image"
          src="{{ uploaded_file_url }}"
          alt="Uploaded Image"
          style="max-width: 100%"
        />
 
        <canvas
          id="overlay-canvas"
          style="position: absolute; top: 0; left: 0"
        ></canvas>
      </div>
    </div>
  </div>
</div>


{% endif %} {% endblock %}
